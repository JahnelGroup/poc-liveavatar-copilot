# ============================================================================
# LiveAvatar / HeyGen
# Get these from: https://app.heygen.com → API Keys / Avatars
# ============================================================================

# API key — HeyGen dashboard → API Keys page
LIVEAVATAR_API_KEY=your_liveavatar_api_key

# Avatar ID — HeyGen dashboard → Avatars → click an avatar → copy ID
# Tip: this repo also includes avatar-ids.md with example IDs.
LIVEAVATAR_AVATAR_ID=your_avatar_id

# API base URL (default works for most accounts)
LIVEAVATAR_API_URL=https://api.liveavatar.com

# true = sandbox/trial mode, false = production mode
LIVEAVATAR_IS_SANDBOX=true

# Public copy of the API URL (needed by the browser SDK)
NEXT_PUBLIC_LIVEAVATAR_API_URL=https://api.liveavatar.com

# ============================================================================
# Deepgram — Speech-to-Text (STT)
# Get this from: https://console.deepgram.com → API Keys
# ============================================================================

# Deepgram API key — Deepgram Console → API Keys → Create key
DEEPGRAM_API_KEY=your_deepgram_api_key

# ============================================================================
# ElevenLabs — Text-to-Speech (TTS)
# Get these from: https://elevenlabs.io → Profile → API Keys / Voices
# ============================================================================

# ElevenLabs API key — ElevenLabs → Profile icon → API Keys
ELEVENLABS_API_KEY=your_elevenlabs_api_key

# Voice ID — ElevenLabs → Voices → pick a voice → copy Voice ID
ELEVENLABS_VOICE_ID=your_voice_id

# Model ID (default is fast/low latency; change only if needed)
ELEVENLABS_MODEL_ID=eleven_flash_v2_5

# ============================================================================
# Microsoft Copilot Studio
#
# This app supports THREE Copilot auth methods (checked in this order).
# You only need to configure ONE method.
#
#   Method 1 (recommended): Delegated user sign-in (MSAL, browser popup)
#     - Users sign in with their Microsoft account
#     - No Power Platform “Application User” setup required
#
#   Method 2: Server-side app-only (client_credentials)
#     - Server authenticates as an Entra app (no user sign-in)
#     - Often requires a Power Platform admin to register/authorize the app
#
#   Method 3: Token endpoint / Direct Line
#     - Requires the bot's authentication mode to allow those channels
#     - Some tenants disable this (you'll see channels grayed out)
# ============================================================================

# ---- Copilot agent identification (required for methods 1 and 2) -------------
# These tell the official @microsoft/agents-copilotstudio-client SDK which
# agent to connect to.
#
# Environment ID:
#   Power Platform Admin Center → Environments → your env → Details
#   (often prefixed with "Default-", e.g. Default-<tenant-id>)
# Agent Schema Name:
#   Copilot Studio → your agent → Settings → Agent details → Schema name
COPILOT_ENVIRONMENT_ID=Default-your-tenant-id
COPILOT_AGENT_SCHEMA_NAME=your_agent_schema_name

# ---- Method 1: Delegated user sign-in (MSAL) --------------------------------
# These are PUBLIC (safe to expose). Next.js makes NEXT_PUBLIC_* available to the browser.
#
# Where to find these:
#   Azure Portal → App registrations → your app → Overview
#     - Directory (tenant) ID  → NEXT_PUBLIC_ENTRA_TENANT_ID
#     - Application (client) ID → NEXT_PUBLIC_ENTRA_CLIENT_ID
#
# IMPORTANT (MSAL): configure a SPA Redirect URI:
#   Azure Portal → App registrations → your app → Authentication
#   Add a “Single-page application (SPA)” redirect URI for:
#     - http://localhost:3000 (local dev)
#     - https://<your-prod-domain> (production)
NEXT_PUBLIC_ENTRA_TENANT_ID=your_tenant_id
NEXT_PUBLIC_ENTRA_CLIENT_ID=your_entra_app_client_id

# ---- Method 2: Server-side app-only (client_credentials) --------------------
# These are SERVER-ONLY. Do NOT expose secrets to the browser.
#
# Where to find these:
#   Azure Portal → App registrations → your app → Overview
#     - Directory (tenant) ID  → ENTRA_TENANT_ID
#     - Application (client) ID → ENTRA_CLIENT_ID
#   Azure Portal → App registrations → your app → Certificates & secrets
#     - New client secret → copy the VALUE shown once → ENTRA_CLIENT_SECRET
ENTRA_TENANT_ID=your_tenant_id
ENTRA_CLIENT_ID=your_entra_app_client_id
ENTRA_CLIENT_SECRET=your_entra_client_secret

# Optional scope override (defaults to https://api.powerplatform.com/.default)
# ENTRA_SCOPE=https://api.powerplatform.com/.default

# ---- Method 3a: Token endpoint fallback -------------------------------------
# Where to find it (if enabled in your tenant):
#   Copilot Studio → your agent → Channels → Mobile app (or similar) → Token endpoint URL
# COPILOT_TOKEN_ENDPOINT=https://your-token-endpoint-url

# ---- Method 3b: Direct Line secret fallback ---------------------------------
# Where to find it (if enabled in your tenant):
#   Copilot Studio → your agent → Settings → Security → Web channel security → Secret 1 or Secret 2
# COPILOT_DIRECTLINE_SECRET=your_directline_secret

# Optional: include extra diagnostics in Copilot API error responses
# COPILOT_DEBUG=true

# ============================================================================
# Optional public settings
# ============================================================================

# Browser page title
NEXT_PUBLIC_APP_TITLE=LiveAvatar Copilot

# Filler phrase spoken while Copilot is thinking.
# Use {{input}} to inject the (possibly truncated) user question.
#NEXT_PUBLIC_FILLER_TEXT_TEMPLATE=Ah, so you said "{{input}}"... that is an interesting point. Give me just a few seconds to run through my data so I can get you the absolute best answer... alright, I think I have it...`;

# Prompt instructions appended to every user message sent to Copilot.
# The user's question is wrapped as <question>...</question> and these
# instructions are appended as <instructions>...</instructions>.
# Leave empty or remove to send messages without wrapping.
COPILOT_PROMPT_INSTRUCTIONS=You are speaking out loud to a person in a face-to-face conversation. Respond ONLY in plain conversational speech. NEVER use markdown formatting such as bold, italic, bullet points, numbered lists, or headers.  Do not structure your response as a list. Speak naturally as if talking to a friend. Keep your answer to 3-4 short sentences maximum.

# Strip markdown formatting and citation references from bot replies (for TTS/spoken output)
COPILOT_CLEAN_REPLY=true
